{% extends 'base.html.twig' %}
{% block message %}
{# dans une boucle for j'appel si success le message add flash que j'ai defini dans une des functions de
mon controller category#}
{# si ma category est supprimée mon message s'affichera grace à la variable globale app sur la page principale#}
{%  for message in app.flashes ('success') %}
      <p>{{ message }}</p>
{% endfor%}
{% endblock message%}
{% block main %}
{# lien de redirection de don #}
<div class="container-fluid">
    <div class="row" id="dons">
        <div class="col-12 col-lg-6 d-flex">
            <p class="faireundon">Faire un Don <br>Pour la ligue contre le cancer</p>
            <a href="https://don.ligue-cancer.net/octobrerose2020/~mon-don?utm_source=sidiese&utm_medium=octobrerose20&utm_campaign=LP&utm_content=boutondon" target="_blank" id="button"><span>Faire un don</span></a>
        </div>
    </div>
</div>
{# grace a la methode path je cree un lien qui renvoi mon formulaire creer dans un fichier twig#}
<div id="lien_category"><a href="{{ path('admin_category_insert')}}"><h1>Créer votre catégory</h1></a></div>
<div class="admin_container_categorys">
        {# avec la boucle for j'appel une category dans les categorys #}
        {% for category in categorys %}
        {# ma condition if et la methode loop.index me permet de récuperer les entités de mes categorys
        et de les afficher en les alternants grâce à else #}
        {# j'appel mes images et mes titres  #}
            <h2 class="title_categorys_admin">{{ category.title}}</h2>
            <div class="display_categorys_admin">
                {% if loop.index is odd %}
                    <article class="box_categorys_admin">
                        <p>{{ category.Date|date("m/d/Y") }}</p>
                        <p>{{ category.article }}</p>
                    </article>
                    {# la methode asset(uploads:category me permet de recuperer les images qui ont été uploadé en bdd #}
                    <img src="{{ asset('uploads/category/' ~ category.photo) }}" alt="" id="img_box_categorys_admin">
                {% else %}
                    <img src="{{ asset('uploads/category/' ~ category.photo) }}" alt="" id="img_box_categorys_admin">
                    <article class="box_categorys_admin">
                        <p>{{ category.article }}</p>
                        <p>{{ category.Date|date("m/d/Y") }}</p>
                    </article>
                {% endif %}
            </div>
                {# la condition if is granted me permet de choisir les élements du site qui seront visible pas les personnes
                ayant le role_admin#}
                {% if is_granted('ROLE_ADMIN')%}
                    {# la methode path me permet de rappeler une function deja defini avec son id dans mon controller via son name
                    pour pouvoir supprimer ou modifier une category #}
                    <div class="button_category"><a href="{{ path('admin_category_update', {'id': category.id}) }}">Modifier</a></div>
                    <div class="button_category"><a href="{{ path('admin_category_delete', {'id': category.id}) }}">Supprimer</a></div>
                {% endif %}

        {% endfor %}
</div>
{% endblock main%}





